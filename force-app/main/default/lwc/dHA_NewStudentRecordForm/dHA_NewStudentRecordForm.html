<template>
  <lightning-card title="New DHA Student">
    <h1 class="slds-text-heading_medium">Information</h1>
    <lightning-record-edit-form
      object-api-name="DHA_Student__c"
      onsuccess={handleSuccess}
    >
      <div class="slds-grid">
        <div class="slds-col slds-size_1-of-2 slds-p-left_medium">
          <lightning-input-field field-name="Name"> </lightning-input-field>
          <lightning-input-field field-name="Birthdate__c">
          </lightning-input-field>
          <lightning-input-field field-name="Address__c">
          </lightning-input-field>
          <lightning-input-field field-name="Email__c"> </lightning-input-field>
          <lightning-input-field field-name="Gender__c">
          </lightning-input-field>
        </div>

        <div class="slds-col slds-size_1-of-2 slds-p-left_medium">
          <lightning-output-field field-name="OwnerId"></lightning-output-field>
        </div>
      </div>

      <div class="slds-grid slds-m-top_medium">
        <div class="slds-col slds-size_1-of-2">
          <lightning-icon
            icon-name="utility:emoji"
            size="x-small"
            variant="success"
          ></lightning-icon>
          <h1 class="myCustomContainer slds-text-heading_medium">Classes</h1>
        </div>
        <div class="slds-col slds-size_1-of-2 slds-p-left_medium">
          <lightning-button
            variant="brand-outline"
            label="Add Class"
            icon-name="utility:add"
            onclick={handleAddClass}
          ></lightning-button>
        </div>
      </div>

      <template for:each={rows} for:item="row">
        <div key={row.id} class="slds-grid slds-m-top_medium">
          <!-- Record-picker -->
          <div class="slds-col slds-size_1-of-2 slds-p-left_medium">
            <lightning-record-picker
              data-id={row.id}
              object-api-name="DHA_Class__c"
              field-api-name="Name"
              label="Select Class"
              variant="label-hidden"
              placeholder="Search Class"
              onchange={handleClassChange}
            >
            </lightning-record-picker>
          </div>

          <!-- Delete icon -->
          <div
            class="slds-col slds-size_1-of-2 slds-m-top_xx-small slds-p-left_medium"
          >
            <lightning-button-icon
              data-id={row.id}
              icon-name="utility:delete"
              alternative-text="Remove Row"
              variant="brand"
              size="small"
              onclick={removeRow}
            >
            </lightning-button-icon>
          </div>
        </div>
      </template>

      <div class="slds-m-top_medium slds-align_absolute-center">
        <lightning-button
          label="Cancel"
          onclick={handleCancel}
          class="slds-m-right_small"
        >
        </lightning-button>

        <lightning-button
          label="Save and New"
          type="submit"
          data-action="saveAndNew"
          onclick={setActionType}
          class="slds-m-right_small"
        >
        </lightning-button>

        <lightning-button
          variant="brand"
          type="submit"
          label="Save"
          data-action="save"
          onclick={setActionType}
        >
        </lightning-button>
      </div>
    </lightning-record-edit-form>
  </lightning-card>
</template>
